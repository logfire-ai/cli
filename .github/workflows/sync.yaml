name: Sync Files
on:
  release:
    types:
      - published
jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@main
      - name: Get Latest Tag
        id: latest_tag
        run: echo ::set-output name=tag::$(git describe --abbrev=0 --tags)
      - name: Run GitHub File Sync
        uses: BetaHuhn/repo-file-sync-action@v1
        with:
          GH_PAT: ${{ secrets.TOKEN }}
          source_dir: './'
          target_repo: 'logfire-sh/cli'
          target_branch: 'main'
          target_path: '/'
          tags: ${{ steps.latest_tag.outputs.tag }}
